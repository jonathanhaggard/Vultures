<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
		<title>Vultures</title>
		<meta name="description" content="CSS3 Vultures and day cycle" />
		<meta name="author" content="Jonathan Haggard" />
    	<link rel="icon" type="image/png" href="apple-touch-icon-precomposed.png">
    	
    	<meta name="viewport" content="width=device-width, initial-scale=1">
    	<meta property="og:type"   content="website" /> 
    		<meta property="og:url"    content="http://jonathanhaggard.github.io/Vultures/" /> 
    		<meta property="og:title"  content="CSS3 Vultures and day cycle" /> 
    		<meta property="og:image"  content="apple-touch-icon-precomposed.png" />
    		
    		
		<link rel="stylesheet" type="text/css" href="style.css" />
		<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
		<script src="jquery.transit.min.js"></script>
		<!--[if IE]>
  		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>
	<body>
	
<canvas id="canvas" style="position : absolute; top : 0px; left : 0px;"></canvas>

<!--	<div class="sun"></div>-->
	<div class="clickaplease"></div>
	<div class="cloud"></div>
<!--	<div class="rainclouds">
	<svg version="1.1" id="clouds" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
		  viewBox="0 0 1920 274.604" enable-background="new 0 0 1920 274.604" xml:space="preserve">
	<path fill="#FFFFFF" d="M0,0v263c91.202,0,171.551-46.43,218.727-116.935c3.071-4.59,9.707-7.164,15.115-6.043
		C243.255,141.973,253.008,143,263,143c38.711,0,73.825-15.387,99.571-40.373c3.963-3.846,9.894-3.846,13.857,0
		C402.175,127.613,437.289,143,476,143c40.918,0,77.82-17.187,103.885-44.734c3.796-4.012,9.434-4.012,13.23,0
		C619.18,125.813,656.082,143,697,143c9.992,0,19.745-1.027,29.159-2.978c1.69-0.35,3.358-0.573,4.887-0.66
		C778.099,216.499,863.033,268,960,268s181.901-51.501,228.955-128.638c1.529,0.087,3.197,0.31,4.887,0.66
		c9.414,1.951,19.166,2.978,29.159,2.978c40.918,0,77.82-17.187,103.885-44.734c3.796-4.012,9.434-4.012,13.229,0
		C1366.18,125.813,1403.082,143,1444,143c38.711,0,73.825-15.387,99.571-40.373c3.963-3.846,9.894-3.846,13.857,0
		C1583.175,127.613,1618.289,143,1657,143c9.992,0,19.745-1.027,29.159-2.978c5.408-1.121,12.043,1.453,15.115,6.043
		C1748.449,216.57,1828.798,263,1920,263V0H0z"/>
	</svg>
	
	</div>-->
	
	<div class="ozone"></div>
	
	<div class="stratosphere"></div>
	
	<div class="atmosphere"></div>
	
	<div class="carcas"></div>
	
	<div class="mist"></div>
	
	<div class="smog"></div>
	
<!--	<div class="tinySun"></div>-->

	<div class="mtnHolder">
		<div class="mtnBig"></div>
		<div class="tinySun"></div>
	</div>
	<div class="sky">
		<div class="burdholder">
			<div class="burd"></div>
			<div class="burd"></div>
			<div class="burd"></div>
			<div class="diver"></div>
			<div class="burd"></div>
			<div class="burd"></div>
			<div class="burd"></div>
			<div class="burd"></div>
	  </div>	
	</div>
	
	
	<iframe width="300px" height="200px" class="spotify"  scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/20540444&amp;auto_play=true&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true"></iframe>
	
<!--	<div class="tint"></div>-->
	<p class="text">Fear the vulture, and the vulture will come.</p>
	<script>
	
		
		$( ".mtnHolder" ).click(function() {
		  $( this ).toggleClass( "float" );
		  $( ".spotify" ).toggleClass( "spotifyfloat" );
		  
//		  
//		  
//		  $('.burd').each(function(i){
//			var randomnumber=Math.floor(Math.random()*4);
//		    var row = $(this);
//		    setTimeout(function() {
//		      row.toggleClass('flockdive');
//		    }, 100*randomnumber*i);
//		  })
		  
		  
		});
		$(document).ready(function(e) {

		    $('.sky').click(function(e) {
		        var posX = $(this).position().left,posY = $(this).position().top;
		        
//		        alert( (e.pageX - posX) + ' , ' + (e.pageY - posY));

		        var burdX = e.pageX - posX;
		        var burdY = e.pageY - posY;
		        
		        
		        $('.clickaplease').css({left:burdX,top:burdY}).addClass("clicked");
		        
		        var delay = setTimeout(function(){
		                $(".clickaplease").removeClass("clicked");
		             }, 1000)
		        
		        
		        $('.burdholder').transition({left:burdX,top:burdY}, 3000, 'cubic-bezier(.58,.27,.19,1.14)');
		        
		        
		    });
		});				
						
//	code repurposed from http://codepen.io/Sheepeuh/pen/cFazd
	
	
	requestAnimFrame = (function() {
	return window.requestAnimationFrame ||
	window.webkitRequestAnimationFrame ||
	window.mozRequestAnimationFrame ||
	window.oRequestAnimationFrame ||
	window.msRequestAnimationFrame ||
	function(callback) {
	window.setTimeout(callback, 1000/60);
	};
	})();
	
	var canvas = document.getElementById('canvas');
	var ctx = canvas.getContext('2d');
	
	var width = 0;
	var height = 0;
	
	window.onresize = function onresize() {
		width = canvas.width = window.innerWidth;
		height = canvas.height = window.innerHeight + 10;
	}
	
	window.onresize();
	
	var mouse = {
		X : 0,
		Y : 0
	}
	
	window.onmousemove = function onmousemove(event) {
		mouse.X = event.clientX;
		mouse.Y = event.clientY;
	}
	
	var particules = [];
	var gouttes = [];
	var nombrebase = 5;
	var nombreb = 2;
	
	var controls = {
		rain : 2,
		Object : "Nothing",
		alpha : 1,
		color : 200,
		auto : false,
		opacity : .5,
		saturation : 100,
		lightness : 100,
		back : 100,
		red : 220,
		green : 220,
		blue : 220,
		multi : false,
		speed : 4
	};
	
	function Rain(X, Y, nombre) {
		if (!nombre) {
			nombre = nombreb;
		}
		while (nombre--) {
			particules.push( 
			{
				vitesseX : (Math.random() * 0.25),
				vitesseY : (Math.random() * 9) + 1,
				X : X,
				Y : Y,
				alpha : 1,
				couleur : "hsla(" + controls.color + "," + controls.saturation + "%, " + controls.lightness + "%," + controls.opacity + ")",
			})
		}
	}
	
	function explosion(X, Y, couleur, nombre) {
		if (!nombre) {
			nombre = nombrebase;
		}
		while (nombre--) {
			gouttes.push( 
			{
				vitesseX : (Math.random() * 4-2	),
				vitesseY : (Math.random() * -4 ),
				X : X,
				Y : Y,
				radius : 0.65 + Math.floor(Math.random() *1.6),
				alpha : 1,
				couleur : couleur
			})
		}
	}
	
	function rendu(ctx) {
	
		if (controls.multi == true) {
			controls.color = Math.random()*360;
		}
	
		ctx.save();
		ctx.fillStyle = 'rgba('+controls.red+','+controls.green+','+controls.blue+',' + controls.alpha + ')';
		ctx.fillRect(0, 0, width, height);
		
		var particuleslocales = particules;
		var goutteslocales = gouttes;
		var tau = Math.PI * 2;
	
		for (var i = 0, particulesactives; particulesactives = particuleslocales[i]; i++) {
				
			ctx.globalAlpha = particulesactives.alpha;
			ctx.fillStyle = particulesactives.couleur;
			ctx.fillRect(particulesactives.X, particulesactives.Y, particulesactives.vitesseY/4, particulesactives.vitesseY);
		}
	
		for (var i = 0, gouttesactives; gouttesactives = goutteslocales[i]; i++) {
				
			ctx.globalAlpha = gouttesactives.alpha;
			ctx.fillStyle = gouttesactives.couleur;
			
			ctx.beginPath();
			ctx.arc(gouttesactives.X, gouttesactives.Y, gouttesactives.radius, 0, tau);
			ctx.fill();
		}
			ctx.strokeStyle = "white";
			ctx.lineWidth   = 2;
	
			if (controls.Object == "Umbrella") {
				ctx.beginPath();
				ctx.arc(mouse.X, mouse.Y+10, 138, 1 * Math.PI, 2 * Math.PI, false);
				ctx.lineWidth = 3;
				ctx.strokeStyle = "hsla(0,100%,100%,1)";
				ctx.stroke();
			}
			if (controls.Object == "Cup") {
				ctx.beginPath();
				ctx.arc(mouse.X, mouse.Y+10, 143, 1 * Math.PI, 2 * Math.PI, true);
				ctx.lineWidth = 3;
				ctx.strokeStyle = "hsla(0,100%,100%,1)";
				ctx.stroke();
			}
			if (controls.Object == "Circle") {
				ctx.beginPath();
				ctx.arc(mouse.X, mouse.Y+10, 138, 1 * Math.PI, 3 * Math.PI, false);
				ctx.lineWidth = 3;
				ctx.strokeStyle = "hsla(0,100%,100%,1)";
				ctx.stroke();
			}
		ctx.restore();
		
		if (controls.auto) {
			controls.color += controls.speed;
			if (controls.color >=360) {
				controls.color = 0;
			}
		}
	}
	
	function update() {
	
		var particuleslocales = particules;
		var goutteslocales = gouttes;
		
		for (var i = 0, particulesactives; particulesactives = particuleslocales[i]; i++) {
			particulesactives.X += particulesactives.vitesseX;
			particulesactives.Y += particulesactives.vitesseY+5;
			if (particulesactives.Y > height-15) {
				particuleslocales.splice(i--, 1);
				explosion(particulesactives.X, particulesactives.Y, particulesactives.couleur);
			}
			var umbrella = (particulesactives.X - mouse.X)*(particulesactives.X - mouse.X) + (particulesactives.Y - mouse.Y)*(particulesactives.Y - mouse.Y);
				if (controls.Object == "Umbrella") {
					if (umbrella < 20000 && umbrella > 10000 && particulesactives.Y < mouse.Y) {
						explosion(particulesactives.X, particulesactives.Y, particulesactives.couleur);
						particuleslocales.splice(i--, 1);
					}
				}
				if (controls.Object == "Cup") {
					if (umbrella > 20000 && umbrella < 30000 && particulesactives.X+138 > mouse.X && particulesactives.X-138 < mouse.X && particulesactives.Y > mouse.Y) {
						explosion(particulesactives.X, particulesactives.Y, particulesactives.couleur);
						particuleslocales.splice(i--, 1);
					}
				}
				if (controls.Object == "Circle") {
					if (umbrella < 20000) {
						explosion(particulesactives.X, particulesactives.Y, particulesactives.couleur);
						particuleslocales.splice(i--, 1);
					}
				}
		}
	
		for (var i = 0, gouttesactives; gouttesactives = goutteslocales[i]; i++) {
			gouttesactives.X += gouttesactives.vitesseX;
			gouttesactives.Y += gouttesactives.vitesseY;
			gouttesactives.radius -= 0.075;
			if (gouttesactives.alpha > 0) {
				gouttesactives.alpha -= 0.005;
			} else {
				gouttesactives.alpha = 0;
			}
			if (gouttesactives.radius < 0) {
				goutteslocales.splice(i--, 1);
			}
		}
	
		var i = controls.rain;
		while (i--) {
			Rain(Math.floor((Math.random()*width)), -15);
		}
	}
	
	function Screenshot() {
		window.open(canvas.toDataURL());
	}
	

	(function boucle() {
		requestAnimFrame(boucle);
		update();
		rendu(ctx);
	})();
	</script>
	</body>
</html>